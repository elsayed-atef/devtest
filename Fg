# Function to Perform Log Rotation
function Rotate-Log {
    param (
        [string]$logFilePath,
        [int]$maxLogSizeMB
    )

    if (Test-Path $logFilePath) {
        $logFileSizeMB = (Get-Item $logFilePath).Length / 1MB
        if ($logFileSizeMB -ge $maxLogSizeMB) {
            $timestamp = Get-Date -Format "yyyyMMdd_HHmmss"
            $archiveFilePath = Join-Path -Path (Split-Path $logFilePath) -ChildPath "housekeeping_$timestamp.log"
            Rename-Item $logFilePath $archiveFilePath
            Compress-Archive -Path $archiveFilePath -DestinationPath "$archiveFilePath.zip"
            Remove-Item $archiveFilePath
        }
    }
}
